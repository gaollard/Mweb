# 1.1 hash 和 chunkhash 的区别

![屏幕快照 2018-10-02 下午6.43.57](media/15384769381662/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-10-02%20%E4%B8%8B%E5%8D%886.43.57.png)


文件的hash指纹通常作为前端静态资源实现增量更新的方案之一，Webpack是目前最流行的开源编译工具之一，其强大的功能也带来很多坑（当然，大部分麻烦其实都可以在官方文档中找到答案）。

## hash

`hash` 代表的是 `compilation` 的 `hash` 值。compilation对象代表某个版本的资源对应的编译进程。

当使用Webpack的development中间件时，每次检测到项目文件**有改动**就会创建一个compilation，进而能够针对改动生产全新的编译文件。compilation对象包含当前模块资源、待编译文件、有改动的文件和监听依赖的所有信息。

> 如果所有依赖的文件都没有发生变化，那么将不会创建一次compilation

## chunkhash

`chunkhash` 代表的是 `chunk` 的 `hash` 值。简单讲，`chunk` 就是模块。`chunkhash` 也就是根据模块内容计算出的 `hash` 值。

> 根据chunkhash的定义知道，chunkhash是根据具体模块文件的内容计算所得的hash值，所以某个文件的改动只会影响它本身的hash指纹，不会影响其他文件。

## 使用 hash 作为编译输出文件的hash指纹的弊端

`hash` 是 `compilation` 对象计算所得，而不是具体的项目文件计算所得。所以以上配置的编译输出文件，所有的文件名都会使用相同的hash指纹。

这样带来的问题是，三个js文件任何一个改动都会影响另外两个文件的最终文件名。上线后，另外两个文件的浏览器缓存也全部失效。这肯定不是我们想要的结果。


